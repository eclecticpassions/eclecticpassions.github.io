<!doctype html><html lang=en-GB data-theme><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><meta name=theme-name content="Anubis2"><title>Booting DietPi from SSD on a Raspberry Pi 4B 8GB - Burgeon Lab</title>
<meta name=description content="Booting DietPi Linux from an external SSD on a Raspberry Pi 4B for faster performance. Install using backup images to preserve an existing /home partition."><link rel=icon type=image/x-icon href=https://www.burgeonlab.com/favicons/favicon.ico><link rel=apple-touch-icon-precomposed href=https://www.burgeonlab.com/favicons/apple-touch-icon.png><link rel=stylesheet href=/css/style.min.44f8240afd8df81b52565c4119ac5ae247776c77fc6d7ccf6e101a6c98abfa7a.css integrity="sha256-RPgkCv2N+BtSVlxBGaxa4kd3bHf8bXzPbhAabJir+no="><link rel=stylesheet href=/css/style.min.c4c04b3ef88e3d619ad4c7ee5e03048422bc55c4fefdc1f07657c1133670aa22.css integrity="sha256-xMBLPviOPWGa1MfuXgMEhCK8VcT+/cHwdlfBEzZwqiI="><link rel=stylesheet href=/css/style.min.21c5d8fe0a79d623b0adc1ce4bd4f6dd2c05cd939c9aaaa966ba7186b1464f4d.css integrity="sha256-IcXY/gp51iOwrcHOS9T23SwFzZOcmqqpZrpxhrFGT00="><link rel=stylesheet href=/css/style.min.08b2a5c028d8a82bffa5ae4a0349b00fd4719f546493fd9d137450a574c3f84b.css integrity="sha256-CLKlwCjYqCv/pa5KA0mwD9Rxn1Rkk/2dE3RQpXTD+Es=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4 crossorigin=anonymous></script><script src=/js/script.min.08f04d96386c73c9bf4d160333f8f448c05a6e01c06770542ee0e013954ce930.js type=text/javascript integrity="sha256-CPBNljhsc8m/TRYDM/j0SMBabgHAZ3BULuDgE5VM6TA="></script></head><body><a class=skip-main href=#main>Skip to main content</a><div class=container><header class=common-header id=top-anchor><div class=header-top><div class=header-top-left><div class=header-content><img class=site-logo src=/favicons/apple-touch-icon.png><div class=left-content><h1 class="site-title noselect"><a href=/>Burgeon Lab</a></h1><p class=site-description>Documenting my homelab journey; amongst other techy enlightenments.</p></div></div><ul class="social-icons noselect"></ul></div><div class=header-top-right></div></div><nav class=noselect><a href=https://www.burgeonlab.com/ title>Home</a>
<a href=https://www.burgeonlab.com/about/ title>About</a>
<a href=https://www.burgeonlab.com/posts/ title>Posts</a>
<a href=https://www.burgeonlab.com/tags/ title>Tags</a>
<a href=https://www.burgeonlab.com/series/ title>Series</a></nav></header><main id=main tabindex=-1><article class="post h-entry"><div class=post-header><header><h1 class="p-name post-title">Booting DietPi from SSD on a Raspberry Pi 4B 8GB</h1></header><div class="post-info noselect"><div class="post-date dt-published"><time datetime=2023-10-01>2023-10-01</time>
[Last modified: <time datetime=2025-04-14>2025-04-14</time>]</div><a class="post-hidden-url u-url" href=/2023/booting-dietpi-from-ssd-on-a-raspberry-pi-4b-8gb/>/2023/booting-dietpi-from-ssd-on-a-raspberry-pi-4b-8gb/</a>
<a href=https://www.burgeonlab.com/ class="p-name p-author post-hidden-author h-card" rel=me></a><div class=post-taxonomies><ul class=post-tags><li><a href=/tags/raspberry-pi>#raspberry pi</a></li><li><a href=/tags/dietpi>#dietpi</a></li><li><a href=/tags/networking>#networking</a></li></ul></div></div></div><details class="toc noselect"><summary>Table of Contents</summary><div class=inner><nav id=TableOfContents><ul><li><a href=#setting-up-dietpi-on-a-headless-raspberry-pi-4b-8gb>Setting up DietPi on a headless Raspberry Pi 4B 8GB</a><ul><li><a href=#good-ol-ethernet-saves-the-day>Good ol&rsquo; Ethernet saves the day</a></li><li><a href=#not-all-wifi-channels-are-showing>Not all WiFi channels are showing</a></li></ul></li><li><a href=#booting-dietpi-from-external-ssd>Booting DietPi from external SSD</a><ul><li><a href=#using-the-image-backup-script-to-make-an-image>Using the image-backup script to make an image</a></li></ul></li><li><a href=#installing-software>Installing software</a></li></ul></nav></div></details><script>var toc=document.querySelector(".toc");toc&&toc.addEventListener("click",function(){event.target.tagName!=="A"&&(event.preventDefault(),this.open?(this.open=!1,this.classList.remove("expanded")):(this.open=!0,this.classList.add("expanded")))})</script><div class="content e-content"><h2 id=setting-up-dietpi-on-a-headless-raspberry-pi-4b-8gb><div><a href=#setting-up-dietpi-on-a-headless-raspberry-pi-4b-8gb>#
</a>Setting up DietPi on a headless Raspberry Pi 4B 8GB</div></h2><img src=/2023/booting-dietpi-from-ssd-on-a-raspberry-pi-4b-8gb/title.webp alt="ALT TEXT HERE"><p>Using <a href=https://etcher.balena.io/>Balena Etcher</a> on macOS, I flashed a copy of the <a href=https://dietpi.com/#downloadinfo>Raspberry Pi 2/3/4 DietPi</a> image onto a Kingston 128GB Canvas Go Plus microSD card. Went through the default configuration via SSH in a Wi-Fi, headless setup.</p><h3 id=good-ol-ethernet-saves-the-day><div><a href=#good-ol-ethernet-saves-the-day>##
</a>Good ol&rsquo; Ethernet saves the day</div></h3><p>Following the installation <a href=https://dietpi.com/docs/install/>guide</a>, despite enabling WiFi in the the initial one-time-use <code>dietpi.txt</code> and entering my WiFi credentials in <code>dietpi-wifi.txt</code>, I was unable to get the RPi to connect to my network (which meant I couldn&rsquo;t scan for its IP address). I resorted to plugging it into the router with an Ethernet cable; got the IP address of the RPi and turned on WiFi manually in <code>dietpi-config</code> after the first boot. My router is not conveniently accessible, so it was a relief when I could get it to work after the initial setup.</p><h3 id=not-all-wifi-channels-are-showing><div><a href=#not-all-wifi-channels-are-showing>##
</a>Not all WiFi channels are showing</div></h3><p>If you are having trouble finding the 5Ghz channel of your WiFi connection, ensure the country code is correct. For example, I had HK (Hong Kong) set in the DietPi network locale settings, but it could only detect my 2.4Ghz network. After changing it to CN (China), I was able to see the 5G SSID.</p><h2 id=booting-dietpi-from-external-ssd><div><a href=#booting-dietpi-from-external-ssd>#
</a>Booting DietPi from external SSD</div></h2><p>I bought a UGREEN USB 3.1 enclosure <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> for my Samsung 870 EVO SATA SSD.</p><img src=/2023/booting-dietpi-from-ssd-on-a-raspberry-pi-4b-8gb/enclosure.webp alt="UGREEN 2.5 inch SATA drive USB Enclosure">
<img src=/2023/booting-dietpi-from-ssd-on-a-raspberry-pi-4b-8gb/enclosure_spec.webp alt="Specification of aluminium usb SSD enclosure"><p>The SSD was previously formatted as ext4 from when I was messing around with antiX and Debian on two old PCs. I had my music library in one of the /home partitions (the other two partitions being a /swap and /boot).</p><p>And here is why it became a bit tricky for me; I couldn&rsquo;t find an easy way to clone the current OS image from the microSD onto the existing /boot partition, delete the /swap and keep the /home so my music files remain untouched.</p><p>I can&rsquo;t read or write ext4 on macOS (ext4fuse didn&rsquo;t work and I didn&rsquo;t want to pay for the Paragon software), so I had to find a way to clone on the Raspberry Pi CLI via SSH. It took me some searching before I found a way to make a backup image of the currently running DietPi OS from the microSD.</p><h3 id=using-the-image-backup-script-to-make-an-image><div><a href=#using-the-image-backup-script-to-make-an-image>##
</a>Using the image-backup script to make an image</div></h3><p>Originally I was going to use <code>dd</code> to make a copy but I read that it is not good practice to copy a live, working system this way. I eventually used a tool called <code>image-utils</code> found at the <a href="https://forums.raspberrypi.com/viewtopic.php?t=332000">Raspberry Pi forum</a>. Using this <code>image-backup</code> script, a backup of the current system can be made</p><p>I tried flashing the modified DietPi backup image to the /boot partition, preserving the /home partition with my music files, but in the end, all I could do was flash the .img file using Etcher again on my Mac to the SSD, formatting the drive in the process.</p><p>With that out of the way, I shut down the Pi, removed the microSD and plugged in the UGREEN enclosure into one the the USB 3.0 (blue) ports and turned on the Pi. It booted up without any trouble and I called it a day.</p><h2 id=installing-software><div><a href=#installing-software>#
</a>Installing software</div></h2><p>Filled with anticipation, I went ahead and installed some services via the optimized dietpi-software list.</p><img src=/2023/booting-dietpi-from-ssd-on-a-raspberry-pi-4b-8gb/dietpi_software.webp alt="Software to be installed on the DietPi distro for Raspberry Pi 4B"><p>I only have experience with <a href=https://www.navidrome.org/>Navidrome</a> and <a href=https://pi-hole.net/>Pi-hole</a>. Some other self-hosted applications I am planning to run on my Raspberry Pi 4B homelab are:</p><ul><li><a href=https://miniflux.app/docs/installation.html>Miniflux</a> - RSS</li><li><a href=https://gitlab.com/py_crash/docker-libregrammar>Libregrammar</a> - LT fork</li><li><a href=https://github.com/wallabag/wallabag>Wallabag</a> - bookmark manager</li><li><a href=https://calibre-ebook.com/>calibre</a> - ebook manager</li><li><a href=https://tailscale.com/>Tailscale</a> - VPN</li></ul><p>A great place to discover programs to self host is <a href=https://github.com/awesome-selfhosted/awesome-selfhosted>awesome-selfhosted/awesome-selfhosted</a>. I&rsquo;ll be updating how I set up each of these as I learn how to do it!</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>I bought the metal case variant UGREEN 2.5" SATA Enclosure, with the phrase &ldquo;Protect What You Love!&rdquo; laser etched on the bottom right corner of the top plate. The USB cable is a Micro B to USB-A 3.0. There&rsquo;s more info from <a href=https://jamesachambers.com/best-ssd-storage-adapters-for-raspberry-pi-4-400/>James Chamber&rsquo;s page</a> on what external drives works well with the Raspberry Pi.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><div class="pagination post-pagination"><div class="left pagination-item"><a href=/2023/adding-a-simple-scroll-to-the-top-button-to-your-hugo-site/>Adding a simple &ldquo;scroll to the top&rdquo; button to your Hugo site</a></div><div class="right pagination-item"><a href=/2023/sudden-influx-of-new-gear/>Sudden Influx of New Gear</a></div></div></main><footer class="common-footer noselect"><div class=common-footer-bottom><div style=display:flex;align-items:center;gap:8px>© 2023-2025 Naty S, BurgeonLab.com.</div><div style=display:flex;align-items:center;gap:4px><div>Powered by <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>, theme <a target=_blank rel="noopener noreferrer" href=https://github.com/Junyi-99/hugo-theme-anubis2>Anubis2</a>.<br></div></div><p class="h-card vcard"><a href=https://www.burgeonlab.com/ class="p-name u-url url fn" rel=me></a></p></footer></div><a href=#top-anchor><button class=top-anchor><i class="fa fa-angle-double-up" aria-hidden=true></i></button></a></body></html>